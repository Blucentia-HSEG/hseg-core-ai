<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#667eea" />
    <meta name="description" content="Blucentia Culture Intelligence Platform - HSEG Workplace Culture Assessment and Analytics" />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Material-UI Roboto Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&display=swap"
    />
    <!-- Segoe UI Font Family -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@300;400;500;600;700&display=swap">

    <title>Blucentia Culture Intelligence Platform</title>

    <style>
      body {
        background-color: #f8f9fa;
        font-family: 'Segoe UI', 'Roboto', Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 0;
      }
      .header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 2rem 0;
        margin-bottom: 2rem;
      }
      .card {
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        border: none;
        margin-bottom: 1.5rem;
      }
      .card-header {
        background-color: #495057;
        color: white;
        font-weight: 600;
      }
      .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
      }
      .btn-primary:hover {
        background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
      }
      .status-indicator {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        display: inline-block;
        margin-right: 8px;
      }
      .status-healthy { background-color: #28a745; }
      .status-degraded { background-color: #ffc107; }
      .status-error { background-color: #dc3545; }
      .response-box {
        background-color: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 0.375rem;
        padding: 1rem;
        margin-top: 1rem;
        font-family: 'Courier New', monospace;
        font-size: 0.875rem;
        max-height: 400px;
        overflow-y: auto;
      }
      .risk-tier-crisis { color: #dc3545; font-weight: bold; }
      .risk-tier-at-risk { color: #fd7e14; font-weight: bold; }
      .risk-tier-mixed { color: #ffc107; font-weight: bold; }
      .risk-tier-safe { color: #198754; font-weight: bold; }
      .risk-tier-thriving { color: #0d6efd; font-weight: bold; }
      .nav-tabs .nav-link.active {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-color: #495057;
      }
      .form-label {
        font-weight: 600;
        color: #495057;
      }
      .loading {
        display: none;
      }
      .spinner-border-sm {
        width: 1rem;
        height: 1rem;
      }
      .character-count {
        font-size: 0.75rem;
        color: #6c757d;
        text-align: right;
      }
      .category-header {
        border-left: 4px solid;
        padding-left: 12px;
        margin-bottom: 20px;
      }
      #root {
        min-height: 100vh;
      }
      /* Hide standalone content when React is active */
      #standalone-content {
        display: block;
      }
      #root:not(:empty) ~ #standalone-content {
        display: none;
      }
    </style>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>

    <!-- Standalone Dashboard Content - Shown only if React doesn't mount -->
    <div id="standalone-content">
      <div class="header">
          <div class="container">
              <div class="row align-items-center">
                  <div class="col-md-8">
                      <h1><i class="fas fa-brain"></i> Blucentia Culture Intelligence Platform</h1>
                      <p class="mb-0">HSEG Workplace Culture Assessment Dashboard</p>
                  </div>
                  <div class="col-md-4 text-end">
                      <div id="apiStatus">
                          <span class="status-indicator status-error"></span>
                          <span>Checking API Status...</span>
                      </div>
                  </div>
              </div>
          </div>
      </div>

      <div class="container">
          <!-- API Configuration -->
          <div class="card">
              <div class="card-header">
                  <i class="fas fa-cog"></i> API Configuration
              </div>
              <div class="card-body">
                  <div class="row">
                      <div class="col-md-6">
                          <label class="form-label">API Base URL</label>
                          <input type="text" class="form-control" id="apiBaseUrl" value="http://localhost:8000" placeholder="http://localhost:8000">
                      </div>
                      <div class="col-md-6">
                          <label class="form-label">Authorization Token (Optional)</label>
                          <input type="text" class="form-control" id="authToken" placeholder="Bearer token for protected endpoints">
                      </div>
                  </div>
                  <div class="mt-3">
                      <button class="btn btn-primary" onclick="checkHealth()">
                          <i class="fas fa-heartbeat"></i> Check API Health
                      </button>
                  </div>
              </div>
          </div>

          <!-- Tab Navigation -->
          <ul class="nav nav-tabs" id="testTabs" role="tablist">
              <li class="nav-item" role="presentation">
                  <button class="nav-link active" id="individual-tab" data-bs-toggle="tab" data-bs-target="#individual" type="button" role="tab">
                      <i class="fas fa-user"></i> Individual Assessment
                  </button>
              </li>
              <li class="nav-item" role="presentation">
                  <button class="nav-link" id="organizational-tab" data-bs-toggle="tab" data-bs-target="#organizational" type="button" role="tab">
                      <i class="fas fa-building"></i> Organizational Assessment
                  </button>
              </li>
              <li class="nav-item" role="presentation">
                  <button class="nav-link" id="upload-tab" data-bs-toggle="tab" data-bs-target="#upload" type="button" role="tab">
                      <i class="fas fa-upload"></i> File Upload
                  </button>
              </li>
              <li class="nav-item" role="presentation">
                  <button class="nav-link" id="status-tab" data-bs-toggle="tab" data-bs-target="#status" type="button" role="tab">
                      <i class="fas fa-chart-line"></i> System Status
                  </button>
              </li>
          </ul>

          <!-- Tab Content -->
          <div class="tab-content" id="testTabsContent">
              <!-- Individual Assessment Tab -->
              <div class="tab-pane fade show active" id="individual" role="tabpanel">
                  <div class="card">
                      <div class="card-header">
                          <i class="fas fa-user-check"></i> Individual Risk Assessment - HSEG Survey
                      </div>
                      <div class="card-body">
                          <div class="alert alert-info">
                              <i class="fas fa-info-circle"></i> This form uses the complete HSEG survey framework with proper weighting and validation.
                          </div>

                          <form id="individualForm">
                              <div class="row">
                                  <div class="col-md-6">
                                      <label class="form-label">Response ID</label>
                                      <input type="text" class="form-control" id="responseId" value="test_001" required>
                                  </div>
                                  <div class="col-md-6">
                                      <label class="form-label">Domain</label>
                                      <select class="form-control" id="domain" required>
                                          <option value="Business">Business</option>
                                          <option value="Healthcare">Healthcare</option>
                                          <option value="University">University</option>
                                          <option value="Government">Government</option>
                                      </select>
                                  </div>
                              </div>

                              <!-- Survey Responses (Q1-Q22) -->
                              <div class="mt-4">
                                  <h5>HSEG Survey Questions (Q1-Q22)</h5>
                                  <p class="text-muted">Complete all 22 questions across 6 categories with proper HSEG weighting</p>
                                  <div id="surveyQuestions">
                                      <div class="alert alert-warning">
                                          <i class="fas fa-info-circle"></i> <strong>Note:</strong> Survey questions will be dynamically generated by JavaScript. If you see this message, ensure that the JavaScript files are loading properly.
                                      </div>
                                  </div>
                              </div>

                              <!-- Strategic Open-Ended Questions -->
                              <div class="mt-4">
                                  <h5>Strategic Open-Ended Questions</h5>
                                  <p class="text-muted">Critical incident analysis and solution identification - Character limits enforced</p>

                                  <div class="mb-3">
                                      <label class="form-label">Q23: Critical Incident Analysis (150 characters max)</label>
                                      <textarea class="form-control" id="q23Text" rows="3" maxlength="150"
                                          placeholder="If you could change one thing that would most improve safety and wellbeing in your workplace, what would it be?"
                                          oninput="updateCharacterCount('q23Text', 'q23Count', 150)"></textarea>
                                      <div class="character-count" id="q23Count">0/150 characters</div>
                                  </div>

                                  <div class="mb-3">
                                      <label class="form-label">Q24: Risk Signal Detection (200 characters max)</label>
                                      <textarea class="form-control" id="q24Text" rows="3" maxlength="200"
                                          placeholder="What workplace experience, if any, has most negatively impacted your mental health or wellbeing?"
                                          oninput="updateCharacterCount('q24Text', 'q24Count', 200)"></textarea>
                                      <div class="character-count" id="q24Count">0/200 characters</div>
                                  </div>

                                  <div class="mb-3">
                                      <label class="form-label">Q25: Cultural Strength Assessment (150 characters max)</label>
                                      <textarea class="form-control" id="q25Text" rows="3" maxlength="150"
                                          placeholder="What is one thing your workplace does exceptionally well that other organizations should adopt?"
                                          oninput="updateCharacterCount('q25Text', 'q25Count', 150)"></textarea>
                                      <div class="character-count" id="q25Count">0/150 characters</div>
                                  </div>
                              </div>

                              <!-- Demographics -->
                              <div class="mt-4">
                                  <h5>Demographic Information</h5>
                                  <p class="text-muted">All responses remain completely anonymous - Questions Q26-Q33 from HSEG framework</p>

                                  <div class="row">
                                      <div class="col-md-4">
                                          <label class="form-label">Q26: Age Range</label>
                                          <select class="form-control" id="ageRange">
                                              <option value="Under_25">Under 25</option>
                                              <option value="25-34" selected>25-34</option>
                                              <option value="35-44">35-44</option>
                                              <option value="45-54">45-54</option>
                                              <option value="55_and_over">55 and over</option>
                                          </select>
                                      </div>
                                      <div class="col-md-4">
                                          <label class="form-label">Q27: Gender Identity</label>
                                          <select class="form-control" id="genderIdentity">
                                              <option value="Woman" selected>Woman</option>
                                              <option value="Man">Man</option>
                                              <option value="Non-binary">Non-binary</option>
                                              <option value="Prefer_not_to_say">Prefer not to say</option>
                                          </select>
                                      </div>
                                      <div class="col-md-4">
                                          <label class="form-label">Q29: Education Level</label>
                                          <select class="form-control" id="educationLevel">
                                              <option value="High_school">High school or equivalent</option>
                                              <option value="Some_college">Some college/Associate degree</option>
                                              <option value="Bachelors" selected>Bachelor's degree</option>
                                              <option value="Graduate">Graduate/Professional degree</option>
                                          </select>
                                      </div>
                                  </div>

                                  <div class="row mt-3">
                                      <div class="col-md-4">
                                          <label class="form-label">Q30: Tenure at Organization</label>
                                          <select class="form-control" id="tenureRange">
                                              <option value="Less_than_1_year">Less than 1 year</option>
                                              <option value="1-3_years" selected>1-3 years</option>
                                              <option value="4-7_years">4-7 years</option>
                                              <option value="8_or_more_years">8 or more years</option>
                                          </select>
                                      </div>
                                      <div class="col-md-4">
                                          <label class="form-label">Q31: Position Level</label>
                                          <select class="form-control" id="positionLevel">
                                              <option value="Entry">Entry level</option>
                                              <option value="Mid" selected>Mid-level</option>
                                              <option value="Senior">Senior level</option>
                                              <option value="Executive">Executive/Leadership</option>
                                          </select>
                                      </div>
                                      <div class="col-md-4">
                                          <label class="form-label">Q33: Supervise Others?</label>
                                          <select class="form-control" id="supervisesOthers">
                                              <option value="false" selected>No</option>
                                              <option value="true">Yes</option>
                                          </select>
                                      </div>
                                  </div>

                                  <div class="row mt-3">
                                      <div class="col-md-6">
                                          <label class="form-label">Q32: Department/Role</label>
                                          <input type="text" class="form-control" id="department" value="Engineering"
                                              placeholder="Enter your department or primary role">
                                      </div>
                                      <div class="col-md-6">
                                          <label class="form-label">Q28: Racial/Ethnic Background</label>
                                          <select class="form-control" id="ethnicityGroup">
                                              <option value="White">White/Caucasian</option>
                                              <option value="Black">Black/African American</option>
                                              <option value="Hispanic_Latino">Hispanic/Latino</option>
                                              <option value="Asian_Pacific_Islander">Asian/Pacific Islander</option>
                                              <option value="Native_American">Native American/Indigenous</option>
                                              <option value="Middle_Eastern">Middle Eastern/North African</option>
                                              <option value="Multiracial">Multiracial</option>
                                              <option value="Prefer_not_to_say">Prefer not to say</option>
                                          </select>
                                      </div>
                                  </div>
                              </div>

                              <div class="mt-4">
                                  <button type="submit" class="btn btn-primary btn-lg">
                                      <span class="loading spinner-border spinner-border-sm me-2"></span>
                                      <i class="fas fa-brain"></i> Submit HSEG Assessment
                                  </button>
                                  <button type="button" class="btn btn-secondary ms-2" onclick="fillSampleData()">
                                      <i class="fas fa-flask"></i> Fill Sample Data
                                  </button>
                              </div>
                          </form>

                          <div id="individualResponse" class="response-box" style="display: none;"></div>
                      </div>
                  </div>
              </div>

              <!-- Other tabs content would go here -->
              <div class="tab-pane fade" id="organizational" role="tabpanel">
                  <div class="card">
                      <div class="card-header">
                          <i class="fas fa-building"></i> Organizational Risk Assessment
                      </div>
                      <div class="card-body">
                          <div class="alert alert-info">
                              <i class="fas fa-info-circle"></i> Organizational assessment requires at least 5 individual responses.
                          </div>
                          <p>Organizational assessment functionality will be loaded when JavaScript is enabled.</p>
                      </div>
                  </div>
              </div>

              <div class="tab-pane fade" id="upload" role="tabpanel">
                  <div class="card">
                      <div class="card-header">
                          <i class="fas fa-upload"></i> File Upload
                      </div>
                      <div class="card-body">
                          <div class="alert alert-warning">
                              <i class="fas fa-exclamation-triangle"></i> <strong>Note:</strong> File upload requires JavaScript to be enabled.
                          </div>
                          <p>File upload functionality will be available when the application loads.</p>
                      </div>
                  </div>
              </div>

              <div class="tab-pane fade" id="status" role="tabpanel">
                  <div class="card">
                      <div class="card-header">
                          <i class="fas fa-chart-line"></i> System Status
                      </div>
                      <div class="card-body">
                          <p>System status will be available when the application loads.</p>
                      </div>
                  </div>
              </div>
          </div>
      </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Character count utility function -->
    <script>
        function updateCharacterCount(textareaId, countId, maxLength) {
            const textarea = document.getElementById(textareaId);
            const counter = document.getElementById(countId);
            if (textarea && counter) {
                const currentLength = textarea.value.length;
                counter.textContent = `${currentLength}/${maxLength} characters`;

                if (currentLength > maxLength * 0.9) {
                    counter.style.color = '#dc3545';
                } else if (currentLength > maxLength * 0.7) {
                    counter.style.color = '#ffc107';
                } else {
                    counter.style.color = '#6c757d';
                }
            }
        }

        // Initialize character counters
        document.addEventListener('DOMContentLoaded', function() {
            updateCharacterCount('q23Text', 'q23Count', 150);
            updateCharacterCount('q24Text', 'q24Count', 200);
            updateCharacterCount('q25Text', 'q25Count', 150);
        });

        // Placeholder functions for buttons
        function checkHealth() {
            alert('API health check functionality will be implemented in the React app.');
        }

        function fillSampleData() {
            alert('Sample data functionality will be implemented in the React app.');
        }
    </script>
  </body>
</html>